### общая информация 
в папке SHRI-SERVER находятся три основные папки для работы проектов:
* build-server-agent - (в ней лежат build-server и build-agent )
* react-ui - (реакт приложение работае с server-ui)
* server-ui - ( сервер для работы с реакт приложением )
* версия ноды v14.17.0



 ## 1.REACT ПРИЛОЖЕНИЕ react-ui

### для запуска приложения нужно

*  *сменить деррикторию с **shri-server**  на **shri-server/react-ui*** 

*  *установить зависимости **npm install***

*  *запустить тесты **npm run start*** 

приложение запустится на http://localhost:3001

## 2. СЕРВЕР server-ui

### для запуска сервера нужно

*  *сменить деррикторию с **shri-server**  на **shri-server/server-ui***  

*  *установить зависимости **npm install***

*  *запустить сервер **npm run start*** 

сервер запустится на http://localhost:3000


В каждом запросе к бэкенду нужно передавать специальный токен в заголовке Authorization 

в файле **shri-server/server-ui/src/controllers/api/config.js** указал место куда нужно вставить токен

(например, Authorization: Bearer eyjhbgcioijiuzi1niisi,

 где "eyjhbgcioijiuzi1niisi" — это токен).
 
  Получить токен можно на страничке https://shri.yandex/hw. Для этого нужно залогиниться через GitHub.



## 3. build-server
### для запуска билд сервера нужно

*  *сменить деррикторию с **shri-server**  на **shri-server/build-server-agent/build-server***  

*  *установить зависимости **npm install***

* в файле **shri-server/build-server-agent/build-server/src/controllers/config.js** указал место куда нужно вставить токен

*  *запустить сервер **npm run start*** 

сервер запустится на http://localhost:3002


### 4. build-agent
### для запуска билд агента нужно

*  *сменить деррикторию с **shri-server**  на **shri-server/build-server-agent/build-agent***  

*  *установить зависимости **npm install***

*  *запустить сервер **node src/agent.js (номер порта)*** например node src/agent.js 3003
агенты нужно запускать на уникальных портах,хоть два хоть три (я понимаю что это очевидно но мне спокойней если напишу :) )
пред запуском агентов build-server должен быть запущен


####после запуска билд сервера и билд агента ничего делать не нужно сервер сам раз в минуту сходит в БД и обновит список коммитов которые нужно сбилдить и отправит логи  обратно. В консоль пытался вывести важные этапы операций чтоб было видно что происходит(регистацию агента,начало билда,окнчание , и.т.д)

##косяки:
1. При добавлении коммита в очередь на билд,в реакт приложении не обновляется страничка даже если в БД уже лежат логи(не придумал пока как ходить по интервалу в БД и ничего не сломать)станичку пока нужно обновлять.
2. При переходе на страничку деталей если ее обновить данные пропадают
3. не придумал пока как обработать момент если build-server  или build-agent упадет с ошибкой
4. время билда в реакт приложении пока вписаны руками(для нормальной реализации все данные уже приходят осталось распарсить ответ и перевести в человеческие часы минуты и.т.д)
5. пока пользователь никак не видит что коммит в процессе билда
6. И самое страшное это нужен рефакторинг кода на билд сервере и билд агенте
7. Агент по непонятным пока причинам через раз удаляет использованный репозиторий
8. Логи не раскрасил

Если чтото забыл указать https://t.me/wof_4  практически 24/7
